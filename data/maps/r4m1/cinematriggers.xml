<?xml version="1.0" encoding="windows-1251" standalone="yes" ?>
<triggers>

	<trigger	Name="cinMolokovozFirst"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)
			TActivate("cinMolokovoz_End")
			TActivate("cinMolokovoz_FadeIn")
			local veh=getObj("PlayerMolokovoz")
			if veh then
				veh:SetExternalPathByName("molokovozStartPath")
			end
			Fly("molokovozExit", CINEMATIC_NO_AIM, nil, 10, 1,1)
			StartCinematic()
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinMolokovoz_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			if GetPlayerVehicle() then
				GetPlayerVehicle():SetThrottle( 0 )
				GetPlayerVehicle():SetCustomLinearVelocity( 0 )
				GetPlayerVehicle():SetGamePositionOnGround(CVector(getPos("PlayerCar_loc")))
				GetPlayerVehicle():SetRotation(Quaternion(0.021, 0.994, -0.008, 0.106))
			end
			AddCinematicMessage( 10, 0.5 )
			CreateHuman( "Human", 1001, CVector(getPos("AddHumanSpawn1_loc")), "AddWalkerHuman1")
			CreateHuman( "Human", 1001, CVector(getPos("AddHumanSpawn2_loc")), "AddWalkerHuman2")
			CreateHuman( "Human", 1001, CVector(getPos("AddHumanSpawn3_loc")), "AddWalkerHuman3")
			trigger:Deactivate()
		</script>
	</trigger>


	<trigger	Name="cinMolokovoz_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			trigger:Deactivate()
			local veh = getObj("PlayerMolokovoz")
			if veh then
				veh:SetExternalPathByName("molokovozStartPath")
				veh:PlaceToEndOfPath("molokovozStartPath")
			end

			SaveWeaponGroups()
--			SetVar("PlayerCarName",GetPlayerVehicle():GetName())
			GetPlayerVehicle():setGodMode(true)
			CapturePlayerVehicle(0, "OilPlayer")

			local veh=getObj("PlayerMolokovoz")
			if veh then
	   		   g_Player:AddChild(veh)
			end
			TActivate("trOiler")
			TDeactivate("cinMolokovoz_FadeIn")
			TDeactivate("cinMolokovozFirst")
			SetCameraBehindPlayerVehicle()

			local town1 = GetEntityByName("TheKef")
			if town1 then town1:SetOpenGateToPlayer( false ) end

			local town2 = GetEntityByName("TheGadad")
			if town2 then town2:SetOpenGateToPlayer( false ) end

			local town3 = GetEntityByName("TheKazif")
			if town3 then town3:SetOpenGateToPlayer( false ) end

			local a = GetEntityByName("StartGonka_loc")
			if a then a:SetProperty("Active",0) end

			RestoreAllToleranceStatus()
		</script>
	</trigger>


	<trigger	Name="cinPlCarReturnFirst"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
--			println("AAA")
			SaveAllToleranceStatus(RS_NEUTRAL)
			TActivate("cinPlCarReturn_End")
			TActivate("cinPlCarReturn_FadeIn")
            TDeactivate("trTrailerDie")
--            LOG("A1")
--			local plcarname=GetVar("PlayerCarName").AsString
--            LOG("A2")
			local veh=getObj("OilPlayerCar")
			if veh then
--	            LOG("A3")
				veh:SetExternalPathByName("playerMolokPath")
				veh:SetCruisingSpeed(15)
			end
--            LOG("A4")
			Fly("molokovozExit", CINEMATIC_NO_AIM, nil, 11, 1,1)
			StartCinematic()
--            LOG("A5")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinPlCarReturn_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
--            LOG("A6")
			if GetPlayerVehicle() then
				AddCinematicMessage( 11, 0.5 )
--	            LOG("A7")
				GetPlayerVehicle():SetThrottle( 0 )
				GetPlayerVehicle():SetCustomLinearVelocity( 0 )
				GetPlayerVehicle():SetGamePositionOnGround(CVector(getPos("MolokovozSpawn_loc")))
				GetPlayerVehicle():SetRotation(Quaternion(-0.047, -0.883, 0.025, 0.467))
--	            LOG("A8")
			end
			trigger:Deactivate()
		</script>
	</trigger>


	<trigger	Name="cinPlCarReturn_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
--            LOG("A9")
--			local plcarname=GetVar("PlayerCarName").AsString
			local veh=getObj("OilPlayerCar")
--            LOG("A10")
			if veh then
--	            LOG("A11")
			    CapturePlayerVehicle(0, "MolokozPl")
	   		    g_Player:AddChild(veh)
	   		    RestoreWeaponGroups()
				veh:SetCustomControlEnabled(1)

				veh:SetExternalPathByName("playerMolokPath")
				veh:PlaceToEndOfPath("playerMolokPath")

				veh:setGodMode(false)
				veh:SetCustomControlEnabled(0)
--	            LOG("A12")
			end
			SetCameraBehindPlayerVehicle()
			RestoreAllToleranceStatus()

			local town1 = GetEntityByName("TheKef")
			if town1 then town1:SetOpenGateToPlayer( true ) end

			local town2 = GetEntityByName("TheGadad")
			if town2 then town2:SetOpenGateToPlayer( true ) end

			local town3 = GetEntityByName("TheKazif")
			if town3 then town3:SetOpenGateToPlayer( true ) end

			local a = GetEntityByName("StartGonka_loc")
			if a then a:SetProperty("Active",1) end

			TDeactivate("cinPlCarReturnFirst")
			TDeactivate("cinPlCarReturn_FadeIn")
--            LOG("A13")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinEngineerFirst"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)
			GetPlayerVehicle():SetThrottle( 0 )
			GetPlayerVehicle():SetCustomLinearVelocity( 0 )

			PlayCustomMusic("Passage04")
			ShowHostileVehicles(false)
			TActivate("cinEngineer_FadeIn")
			TActivate("cinEngineer_End")

			SetVar("PlTorque",GetPlayerVehicle():GetMaxTorque())
			SetVar("PlSpeed",GetPlayerVehicle():GetMaxSpeed())
			SetVar("PlCrSpeed",GetPlayerVehicle():GetCruisingSpeed())


            Fly("EngineerCamPath1", CINEMATIC_NO_AIM, nil, 7.3, 1,0)
			Fly("EngineerCamPath2", CINEMATIC_NO_AIM, nil, 7, 0,1)
			StartCinematic()
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinEngineer_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			if GetPlayerVehicle() then
				GetPlayerVehicle():SetGamePositionOnGround(CVector(4396.869, 300, 5880.139))
				GetPlayerVehicle():SetRotation(Quaternion(-0.018, -0.664, 0.004, 0.748))
--				GetPlayerVehicle():SetMaxTorque(400)
				GetPlayerVehicle():SetMaxSpeed(30)
				GetPlayerVehicle():SetCruisingSpeed(30)
				GetPlayerVehicle():SetForcedMaxTorque(350)
				GetPlayerVehicle():SetExternalPathByName("NearEngineerPlayerPath")
			end

			local enveh=CreateVehicleEx("Sml101","EngCar",CVector(4273.473, 300, 5923.936), 1060)
			if enveh then
				enveh:SetMaxTorque(150)
				enveh:SetMaxSpeed(70)
				enveh:SetCruisingSpeed(75)
				enveh:SetRotation(Quaternion(-0.002, -0.490, -0.011, 0.872))
				enveh:SetExternalPathByName("NearEngineerEngineerPath")
				enveh:setGodMode(1)
			end


			trigger:Deactivate()
		</script>
	</trigger>


	<trigger	Name="cinEngineer_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			local enveh = getObj("EngCar")
			if enveh then 
--				println("AAAAAAAAAA")
				enveh:SetExternalPathByName("NearEngineerEngineerPath")
				enveh:PlaceToEndOfPath("NearEngineerEngineerPath")
				enveh:SetGamePositionOnGround(CVector(4114.627, 249.640, 6045.154))
				enveh:SetRotation(Quaternion(-0.008, 0.221, 0.002, 0.975))
				enveh:SetMaxTorque(100)
				enveh:SetMaxSpeed(80)
				enveh:SetCruisingSpeed(80)
			end

			local torq = GetVar("PlTorque").AsInt
			local speed = GetVar("PlSpeed").AsInt
			local crspeed = GetVar("PlCrSpeed").AsInt


			if GetPlayerVehicle() then
				GetPlayerVehicle():SetExternalPathByName("NearEngineerPlayerPath")
				GetPlayerVehicle():PlaceToEndOfPath("NearEngineerPlayerPath")
				GetPlayerVehicle():SetGamePositionOnGround(CVector(4097.918, 249.925, 6058.852))
				GetPlayerVehicle():SetRotation(Quaternion(-0.016, 0.831, 0.003, 0.555))
--				GetPlayerVehicle():SetMaxTorque(torq)
				GetPlayerVehicle():SetMaxSpeed(speed)
				GetPlayerVehicle():SetCruisingSpeed(crspeed)
				GetPlayerVehicle():ResetForcedMaxTorque()

			end
			PlayCustomMusic("Bio05")
			ShowHostileVehicles(true)
			SetCameraBehindPlayerVehicle()
			RestoreAllToleranceStatus()
			TDeactivate("cinEngineerFirst")
			TDeactivate("cinEngineer_FadeIn")
			StartConversation("r4m1_Engineer")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinEngineerMustDieFirst"	active="0">
		<event	timeout="0"		eventid="GE_TIME_PERIOD" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)
			ShowHostileVehicles(false)
			TActivate("cinEngineerMustDie_End")
			local enveh=getObj("EngCar")
			if enveh then
				enveh:setGodMode( false )
				enveh:SetExternalPathByName("engineerWantDiePath")
				Fly("EngineerCamPath3", CINEMATIC_NO_AIM, nil, 6, 0,0)
				Fly("EngineerCamPath4", CINEMATIC_NO_AIM, nil, 3.5, 0,1)
				StartCinematic()
				AddCinematicMessage( 16, 0.5 )
				AddCinematicMessage( 17, 0.5 )
			end
			PlayCustomMusic("Passage05")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinEngineerMustDie_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
		    ShowHostileVehicles(true)
			StopPlayingCustomMusic()
			SetCameraBehindPlayerVehicle()
			RestoreAllToleranceStatus()
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinBuhArmyFirst"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>   
			SaveAllToleranceStatus(RS_NEUTRAL)
			GetPlayerVehicle():SetThrottle( 0 )
			GetPlayerVehicle():SetCustomLinearVelocity( 0 )

			TActivate("cinBuhArmy_End")

			Fly("BuharsAttackPath", CINEMATIC_NO_AIM, nil, 8, 1,1)
			StartCinematic()

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinBuhArmy_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			SetCameraBehindPlayerVehicle()
			RestoreAllToleranceStatus()
			trigger:Deactivate()
		</script>
	</trigger>


	<trigger	Name="cinBuhPortFirst"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			GetPlayerVehicle():SetCustomLinearVelocity( 0 )
			GetPlayerVehicle():SetThrottle( 0 )

			SaveAllToleranceStatus(RS_NEUTRAL)
			TActivate("cinBuhPort_End")
			TActivate("cinBuhPort_FadeIn")
			PlayCustomMusic("QuietDialogue03")
			Fly("BuharsInPortPath", CINEMATIC_NO_AIM, nil, 18, 1,1)
			StartCinematic()

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinBuhPort_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			for i=0,1 do
				local buh = getObj("Buharers_vehicle_"..i)
				if buh then
					buh:SetMaxTorque(0)
					buh:SetMaxSpeed(0)
				end
			end
			   
			setPos("Buharers_vehicle_0", CVector(1355.880, 220.086, 3133.145))
			setRot("Buharers_vehicle_0", Quaternion(-0.008, 0.741, 0.008, 0.671))
			setPos("Buharers_vehicle_1", CVector(1354.502, 220.103, 3113.447))
			setRot("Buharers_vehicle_1", Quaternion(-0.010, 0.374, 0.004, 0.927))

			setPos(GetPlayerVehicle(), CVector(1387.320, 220.074, 3117.844))
			setRot(GetPlayerVehicle(), Quaternion(-0.009, -0.001, 0.000, 1.000))

			AddCinematicMessage( 12, 0.5 )
			AddCinematicMessage( 13, 0.5 )
			if QuestStatus("d_SinFather_Quest")==Q_COMPLETED then
				local oldLisa = getObj("CARLISA_R4M1_vehicle_0")
				if oldLisa then oldLisa:Remove() end

				local vehLisa = CreateVehicleEx("LisaCar", "LisaBuharers", CVector(1363.683, 220.556, 3105.291), 1042)
				if vehLisa then
					vehLisa:SetSkin(2)
					vehLisa:SetRotation(Quaternion(-0.000, 0.379, -0.000, 0.925))
				end

				AddHistory( "r4_LisaBecameCrazy" )
				AddCinematicMessage( 14, 0.5 )
			end

			AddCinematicMessage( 15, 0.5 )
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinBuhPort_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			for i=0,1 do
				local buh = getObj("Buharers_vehicle_"..i)
				if buh then
					buh:Remove()
				end
			end

			if QuestStatus("d_SinFather_Quest")==Q_COMPLETED then
				if getObj("CARLISA_R4M1_vehicle_0") then
					getObj("CARLISA_R4M1_vehicle_0"):Remove()
				end

				if getObj("LisaControllerR4M1") then
					getObj("LisaControllerR4M1"):Remove()
				end

				if getObj("LisaBuharers") then
					getObj("LisaBuharers"):Remove()
				end
			end

			CompleteQuestIfTaken("r3m2_FindInfoAboutFather")
			StopPlayingCustomMusic()
			SetCameraBehindPlayerVehicle()
			RestoreAllToleranceStatus()

			local a = GetEntityByName("StartGonka_loc")
			if a then a:SetProperty("Active",1) end

			trigger:Deactivate()
		</script>
	</trigger>


	<trigger	Name="cinOilFirst"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			SaveAllToleranceStatus(RS_NEUTRAL)
			GetPlayerVehicle():SetThrottle( 0 )
			GetPlayerVehicle():SetCustomLinearVelocity( 0 )

			TActivate("cinOil_End")
			TActivate("cinOil_FadeIn")
			TActivate("cinOil_StartFly")

			Fly("OilPath1", CINEMATIC_NO_AIM, nil, 6, 1,0)
			Fly("OilPath2", CINEMATIC_NO_AIM, nil, 4, 0,1)
			StartCinematic()

			PlayCustomMusic("Techno03")
            trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinOil_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			GetPlayerVehicle():SetGamePositionOnGround(CVector(getPos("ZapravkaCar_loc")))
			GetPlayerVehicle():SetRotation(Quaternion(-0.005, -0.666, -0.005, 0.746))
			GetPlayerVehicle():SetExternalPathByName("ZapravkaIn")
			AddCinematicMessage( 3, 0.5 )
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="cinOil_StartFly" active="0">
		<event flypath="OilPath2" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			GetPlayerVehicle():SetExternalPathByName("ZapravkaOut")
			trigger:Deactivate()
		</script>
	</trigger>


	<trigger	Name="cinOil_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			StopPlayingCustomMusic()
			GetPlayerVehicle():SetExternalPathByName("ZapravkaOut")
			GetPlayerVehicle():PlaceToEndOfPath("ZapravkaOut")
			SetCameraBehindPlayerVehicle()
			RestoreAllToleranceStatus()
			TActivate("trReturnPlCar")
			trigger:Deactivate()
		</script>
	</trigger>




	<trigger	Name="cinExit42ReturnFirst"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			EnableGodMode()
			GetPlayerVehicle():SetThrottle( 0 )
			GetPlayerVehicle():SetCustomLinearVelocity( 0 )

			TActivate("cinExit42ReturnFirst")
			TActivate("cinExit42Return_FadeIn")
			TActivate("cinExit42Return_End")

			Fly("ExitTo42Return", CINEMATIC_NO_AIM, nil, 6, 1,1)
			StartCinematic()

			if QuestStatus("r4m1_RescueBuharsCivilian")~=Q_COMPLETED then
				AddCinematicMessage( 8802, 0.5 )
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinExit42Return_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			GetPlayerVehicle():SetGamePositionOnGround(CVector(7469.020, 274.164, 3698.224))
			GetPlayerVehicle():SetRotation(Quaternion(0.019, -0.761, 0.027, 0.648))
			GetPlayerVehicle():SetExternalPathByName("ReturnPathR4M2")
			trigger:Deactivate()
		</script>
	</trigger>


	<trigger	Name="cinExit42Return_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			DisableGodMode()
			GetPlayerVehicle():SetExternalPathByName("ReturnPathR4M2")
			GetPlayerVehicle():PlaceToEndOfPath("ReturnPathR4M2")
			SetCameraBehindPlayerVehicle()
			trigger:Deactivate()
		</script>
	</trigger>




	<trigger	Name="cinExit42OkFirst"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			EnableGodMode()
			TDeactivate("trExitToR4M2")
			TActivate("cinExit42OkFirst")
			TActivate("cinExit42Ok_FadeIn")
			TActivate("cinExit42Ok_End")

			Fly("ExitTo42Ok", CINEMATIC_NO_AIM, nil, 4, 1,1)
			StartCinematic()

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinExit42Ok_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			GetPlayerVehicle():SetGamePositionOnGround(CVector(7455.524, 272.676, 3692.821))
			GetPlayerVehicle():SetRotation(Quaternion(-0.047, 0.655, 0.020, 0.754))
			GetPlayerVehicle():SetExternalPathByName("ExitTo42Ok")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinExit42Ok_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			DisableGodMode()
			TActivate("trExitToR4M2")
			PassToMap("r4m2", "FromR4M1", 0 , true)
			trigger:Deactivate()
		</script>
	</trigger>



	<trigger	Name="cinExit11ReturnFirst"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			EnableGodMode()
			GetPlayerVehicle():SetThrottle( 0 )
			GetPlayerVehicle():SetCustomLinearVelocity( 0 )

			TActivate("cinExit11ReturnFirst")
			TActivate("cinExit11Return_FadeIn")
			TActivate("cinExit11Return_End")

			Fly("ExitTo11Return", CINEMATIC_NO_AIM, nil, 4, 1,1)
			StartCinematic()

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinExit11Return_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			GetPlayerVehicle():SetGamePositionOnGround(CVector(3113.161, 274.148, 7483.117))
			GetPlayerVehicle():SetRotation(Quaternion(0.011, 0.919, -0.008, 0.393))
			GetPlayerVehicle():SetExternalPathByName("ReturnPathR1M1")
			trigger:Deactivate()
		</script>
	</trigger>


	<trigger	Name="cinExit11Return_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			DisableGodMode()
			GetPlayerVehicle():SetExternalPathByName("ReturnPathR1M1")
			GetPlayerVehicle():PlaceToEndOfPath("ReturnPathR1M1")
			SetCameraBehindPlayerVehicle()
			trigger:Deactivate()
		</script>
	</trigger>




	<trigger	Name="cinExit11OkFirst"	active="0">
		<event	timeout="0.1"		eventid="GE_TIME_PERIOD" />
		<script>
			EnableGodMode()
			TDeactivate("trExitToR1M1")
			TActivate("cinExit11OkFirst")
			TActivate("cinExit11Ok_FadeIn")
			TActivate("cinExit11Ok_End")

			Fly("ExitTo11Ok", CINEMATIC_NO_AIM, nil, 4, 1,1)
			StartCinematic()

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinExit11Ok_FadeIn"	active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			GetPlayerVehicle():SetGamePositionOnGround(CVector(3099.917, 274.184, 7495.875))
			GetPlayerVehicle():SetRotation(Quaternion(0.002, -0.290, -0.042, 0.956))
			GetPlayerVehicle():SetExternalPathByName("ExitTo11Ok")
			trigger:Deactivate()
		</script>
	</trigger>


	<trigger	Name="cinExit11Ok_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			DisableGodMode()
			TActivate("trExitToR1M1")
			PassToMap("r1m1", "FromR4M1", 0 , true)
			trigger:Deactivate()
		</script>
	</trigger>


	<!-- Игрок впервые приезжает на карту -->
	<trigger	Name="cinPriezdFirst"	active="0">
		<event	timeout="0.01"		eventid="GE_TIME_PERIOD" />
		<script>
			EnableGodMode()
			SaveAllToleranceStatus(RS_NEUTRAL)

			if QuestStatus("d_SinFather_Quest")==Q_COMPLETED then
				Fly("FirstPriezd", CINEMATIC_NO_AIM, nil, 23, 1,1)
			else
				Fly("FirstPriezd", CINEMATIC_NO_AIM, nil, 16, 1,1)
			end
			StartCinematic()
			UpdateCinematic( 1 )
			TActivate("cinPriezd_FadeIn")
			TActivate("cinPriezd_End")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger	Name="cinPriezd_FadeIn"	active="0">
		<event	timeout="0.01"		eventid="GE_TIME_PERIOD" />
		<script>

			GetPlayerVehicle():SetGamePositionOnGround(CVector(3129.591, 273.090, 7477.917))
			GetPlayerVehicle():SetRotation(Quaternion(0.032, 0.925, -0.002, 0.378))
			GetPlayerVehicle():SetExternalPathByName("PriezdToR4M1")
			if QuestStatus("d_SinFather_Quest")==Q_COMPLETED then
				GetPlayerVehicle():LimitMaxSpeed(5.2)
				AddCinematicMessage( 1, 0.25 )
				AddCinematicMessage( 18, 0.25 )
				AddCinematicMessage( 19, 0.25 )
			else
				GetPlayerVehicle():LimitMaxSpeed(7)
				AddCinematicMessage( 1, 0.25 )
				AddCinematicMessage( 2, 0.25 )
			end
			
			trigger:Deactivate()
		</script>
	</trigger>


	<trigger	Name="cinPriezd_End"	active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			GetPlayerVehicle():SetExternalPathByName("PriezdToR4M1")
			GetPlayerVehicle():PlaceToEndOfPath("PriezdToR4M1")
			GetPlayerVehicle():UnlimitMaxSpeed()

			RestoreAllToleranceStatus()

			DisableGodMode()

			SetCameraBehindPlayerVehicle()

			if QuestStatus("d_SinFather_Quest")==Q_COMPLETED then
				local oldLisa = getObj("CARLISA_vehicle_0")
				if oldLisa then oldLisa:Remove() end

				local cont = getObj("LisaControllerR3M1")
				if cont then cont:Remove() end

				TeamCreate("ENEMYLISA", 1042, CVector(3301.896, 267.899, 7348.589), {"LisaCar"}, nil, nil, Quaternion(-0.000, -0.290, -0.011, 0.957))
				local vehLisa = getObj("ENEMYLISA_vehicle_0")
				if vehLisa then
					vehLisa:SetSkin(2)
					vehLisa:setImmortalMode(1)
					TActivate("trENEMYLISA_DEAD")
					TDeactivate("trExitToR1M1")
					SetTolerance(1100, 1042, RS_ENEMY)
				else
					LOG("ERROR! EnemyLisa does not exists!")
				end
			else
				TakeQuest("r4m1_FindNative")
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Вломили Лисе, когда она начала агрессировать -->
	<trigger Name="trENEMYLISA_DEAD" active="0">
		<event eventid="GE_VEHICLE_WITHOUT_HEALTH" ObjName="ENEMYLISA_vehicle_0" />
		<event	timeout="60"		eventid="GE_TIME_PERIOD" />
		<script>

			SaveAllToleranceStatus(RS_NEUTRAL)

			PlayCustomMusic("IntenseDialogue02")

			local vehLisa = CreateVehicleEx("LisaCar", "LisaDefeated", CVector(0, 2000, 0), 1042)
			local vehLisaId = vehLisa:GetId()

			FlyLinked("ENEMYLISADEAD_cam01", GetPlayerVehicleId(), 43.5, 1, 1, vehLisaId)
			StartCinematic()

			TActivate("Rolik_ENEMYLISADEAD_Fade")
			TActivate("Rolik_ENEMYLISADEAD_Msg22")
			TActivate("Rolik_ENEMYLISADEAD_End")
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Rolik_ENEMYLISADEAD_Fade" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:SetGamePositionOnGround(CVector(3313.987, 267.814, 7311.647))
				vehPlayer:SetRotation(Quaternion(-0.010, -0.987, 0.002, -0.160))
			end

			local oldLisa = getObj("ENEMYLISA_vehicle_0")
			if oldLisa then oldLisa:Remove() end

			local vehLisa = GetEntityByName("LisaDefeated")
			if vehLisa then
				vehLisa:SetCustomLinearVelocity(0)
				vehLisa:SetThrottle(0)
				vehLisa:SetSkin(2)
				vehLisa:SetGamePositionOnGround(CVector(3323.063, 267.737, 7283.302))
				vehLisa:SetRotation(Quaternion(0.003, 0.142, 0.003, -0.990))
			end

			AddCinematicMessage(20, 2)
			AddCinematicMessage(21, 0.25)
			AddCinematicMessage(22, 0.25)
			AddCinematicMessage(2, 0.25)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Rolik_ENEMYLISADEAD_Msg22" active="0">
		<event msgid="22" eventid="GE_START_CINEMATIC_MSG" ObjName="Player1" />
		<script>
			StopPlayingCustomMusic()

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Rolik_ENEMYLISADEAD_End" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			RestoreAllToleranceStatus()

			SetCameraBehindPlayerVehicle()

			StopPlayingCustomMusic()

			local oldLisa = getObj("ENEMYLISA_vehicle_0")
			if oldLisa then oldLisa:Remove() end

			local oldLisa = getObj("LisaDefeated")
			if oldLisa then oldLisa:Remove() end

			TeamCreate("CARLISA_R4M1", 1042, CVector(3323.063, 267.737, 7283.302), {"LisaCar"}, nil, nil, Quaternion(0.003, 0.142, 0.003, -0.990))
			local vehLisa = getObj("CARLISA_R4M1_vehicle_0")
			if vehLisa then
				vehLisa:SetSkin(2)
				vehLisa:setImmortalMode(1)

				local newControllerId = CreateNewObject {
					prototypeName	= "someNPCMotionController",
					objName	= "LisaControllerR4M1"
				}
				
				local newController = GetEntityByID(newControllerId)
				
				if newController then
					newController:setVehicleUnderControl(vehLisa)
				end
			else
				LOG("ERROR! Lisa\'s car does not exists!")
			end

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
			end

			TakeQuest("r4m1_FindNative")

			SetTolerance(1100, 1042, RS_ALLY)

			TDeactivate("Rolik_ENEMYLISADEAD_Fade")
			TDeactivate("Rolik_ENEMYLISADEAD_Msg22")
			TActivate("trExitToR1M1")

			trigger:Deactivate()
		</script>
	</trigger>

	<!-- Отплытие на подлодке в Аржан -->

	<trigger Name="cinMovePlToR2M2_begin" active="0">
		<event	timeout="0.01"		eventid="GE_TIME_PERIOD" />
		<script>
			
			SaveAllToleranceStatus(RS_NEUTRAL)
			
			EnableGodMode()
			
			Fly("lodka1", CINEMATIC_NO_AIM, 0, 21, 1, 0 )
			Fly("lodka2", CINEMATIC_NO_AIM, 0, 15, 0, 1 )
			StartCinematic()
			
			PlayCustomMusic("Bio02")
			
			TActivate("cinMovePlToR2M2_Fade")
			TActivate("cinMovePlToR2M2_cam03")
			TActivate("cinMovePlToR2M2_End")
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="cinMovePlToR2M2_Fade" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			
			CreateNewDummyObject( "submarina",	"SubmR4M1", -1, -1, CVector(318.837, 150.000, 3490.127), Quaternion(0.0000, 0.8204, 0.0000, 0.5718), 0 )
			
			local moverId = CreateNewObject { prototypeName	= "cinematicMover", objName  = "" }
			local mover = GetEntityByID( moverId ) 
			local controlledObj = GetEntityByName("SubmR4M1")
			if controlledObj then
				mover:SetObjAndPath( controlledObj:GetId(), "lodka3", 20 )
			end
			
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomLinearVelocity( 0 )
				vehPlayer:SetThrottle( 0 )
				vehPlayer:SetPosition( CVector(1262.583, 214.190, 3151.562))
		   		vehPlayer:SetRotation(Quaternion(-0.005, 0.557, -0.006, -0.830))
		   	end
		   	
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="cinMovePlToR2M2_cam03" active="0">
		<event flypath="lodka2" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			local podlodka = getObj("SubmR4M1")
			if podlodka then
				podlodka:SetNodeAction(AT_STAND2)
			end

			TActivate("subzaezd11")
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="subzaezd11" active="0">
		<event	timeout="7"		eventid="GE_TIME_PERIOD" />
		<script>
			
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetExternalPathByName("subzaezd1")
				vehPlayer:LimitMaxSpeed( 20 )
		   	end
			
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="cinMovePlToR2M2_End" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
			
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetExternalPathByName("subzaezd1")
				vehPlayer:PlaceToEndOfPath()
				vehPlayer:SetCustomLinearVelocity(0)
				vehPlayer:UnlimitMaxSpeed()
		   	end
			
			StopPlayingCustomMusic()
			
			DisableGodMode()
			
			TActivate("trSubDelete")
			
			TDeactivate("subzaezd11")
			TDeactivate("cinMovePlToR2M2_cam03")
			
			RestoreAllToleranceStatus()
			
			SetCameraBehindPlayerVehicle()
						
			PassToMap("r2m2", "FromR4M1", -1 , true)
			
			trigger:Deactivate()
		</script>
	</trigger>

	<!-- The Chronicle of Hamza: Game start  -->

	<trigger	Name="HamzaStartRolikBegin"	active="0">
		<event	timeout="0.01"			eventid="GE_TIME_PERIOD" />
		<script>
			PlayCustomMusic("Bio05")

			local mancar = CreateVehicleEx("UralMansur","MansurCar",CVector(2061.603, 239.088, 3658.598), 1090)
			if mancar then
				mancar:SetExternalPathByName("MansurStartGame_1")
				mancar:SetCruisingSpeed(15)
			end

			local mdCar = GetEntityByName("MansurCar")
			if mdCar then
			    mdCar:SetSkin(1)
			end

			local Plf = GetPlayerVehicle()
            local PlfID = GetPlayerVehicleId()

			local MCarCam = mdCar:GetId()

			CreateTeam("StartDebyli",1062,CVector(2572.051, 267.215, 3917.664),{"UralStartBez","BezHunter","BezHunter"},CVector(2594.501, 262.854, 3906.361), nil)

            Fly("startgameHamza_cam1", CINEMATIC_AIM_TO_ID, PlfID, 11, 1, 0 )
			Fly("startgameHamza_cam2", CINEMATIC_AIM_TO_ID, PlfID, 6, 0, 0 )
			Fly("startgameHamza_cam3", CINEMATIC_AIM_TO_ID, PlfID, 12, 0, 0 )
			Fly("startgameHamza_bez", CINEMATIC_NO_AIM, 0, 6, 0, 0 )
			Fly("stgameHamza_final", CINEMATIC_AIM_TO_ID, PlfID, 4, 0, 1 )

            StartCinematic()

			TActivate("HamzaStartGameRolik_Fade")
			TActivate("HamzaStartGameRolik_Skip")
			TActivate("HamzaStartGameRolik_2")
			TActivate("HamzaStartGameRolik_4")
			TActivate("HamzaStartGameRolik_3")
			TActivate("HamzaStartGameRolik_End")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="HamzaStartGameRolik_Fade" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>

			local PCar = GetPlayerVehicle()
			if PCar then
			    PCar:LimitMaxSpeed(16)
				PCar:SetCustomControlEnabled( true ) 
			    PCar:SetExternalPathByName("XamzaStartGame_1")
				PCar:SetThrottle( 1 )    
				PCar:SetCustomControlEnabled( false )
			end

			AddCinematicMessage(40, 1)
			AddCinematicMessage(41, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="HamzaStartGameRolik_2" active="0">
		<event flypath="startgameHamza_cam2" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage(42, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="HamzaStartGameRolik_4" active="0">
		<event flypath="startgameHamza_cam3" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
            RuleConsole("cinematic_spring_coeff 0.4")

			AddCinematicMessage(43, 0.5)
			AddCinematicMessage(44, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>

    <trigger Name="HamzaStartGameRolik_3" active="0">
		<event flypath="startgameHamza_bez" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			PlayCustomMusic("Passage03b")

			TDeactivate("HamzaStartGameRolik_Skip")

			local PCar = GetPlayerVehicle()
			if PCar then
			    PCar:LimitMaxSpeed(40)
			end

			local MCar = GetEntityByName("MansurCar")
			if MCar then
			    MCar:SetCruisingSpeed(40)
			end

			AddCinematicMessage(45, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="HamzaStartGameRolik_End" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
		local ManCar = GetEntityByName("MansurCar")
		    if ManCar then
		        ManCar:PlaceToEndOfPath("MansurStartGame_1")
			end

		local PCar = GetPlayerVehicle()
			if PCar then
				PCar:UnlimitMaxSpeed()
				PCar:PlaceToEndOfPath("XamzaStartGame_1")
			end

		local mCar = getObj("MansurCar")
			if mCar then
			    mCar:Remove()
		    end

		CreateTeam("MansurTachka",1090,CVector(2485.159, 272.206, 3927.403),{"UralMansur"})

		local mfCar = GetEntityByName("MansurTachka_vehicle_0")
		    if mfCar then
		        mfCar:SetSkin(1)
		end

		TActivate("FirstDebyli_Die")

		TActivate("MansurCar_Die")

		RestoreAllToleranceStatus()

		SetCameraBehindPlayerVehicle()

		trigger:Deactivate()
		</script>
	</trigger>

	<!-- The Chronicle of Hamza: After Mad Battle -->

	<trigger Name="AfterBezumBoiRolik_Start" active="0">
		<event	timeout="0.01"			eventid="GE_TIME_PERIOD" />
		<script>
            PlayCustomMusic("IntenseDialogue03")

			SaveAllToleranceStatus(RS_NEUTRAL)

			RuleConsole("cinematic_spring_coeff 0.3")

			local mfEndCar = GetEntityByName("MansurTachka_vehicle_0")
			    if mfEndCar then
				mfEndCar:Remove()
			end

			CreateVehicleEx("UralMansur","MansurCar",CVector(2529.488, 266.557, 3914.102), 1090)

            local Plf = GetPlayerVehicle()
            local PlfID = GetPlayerVehicleId()

			local MCar = GetEntityByName("MansurCar")
			local MCarID = MCar:GetId()

            Fly("afterbattleHamza_cam1", CINEMATIC_NO_AIM, 0, 50.5, 1, 0 )  
			FlyLinked( "afterbattleHamza_cam2", nil, 13, 0, 0, PlfID ) 
			FlyLinked( "afterbattleHamza_cam3", nil, 33, 0, 0, PlfID )
			FlyLinked( "afterbattleHamza_cam4", nil, 6, 0, 1, MCarID )  

			StartCinematic()

            TActivate("AfterBezumBoiRolik_Fade")
			TActivate("AfterBezumBoiRolik_End")
			TActivate("RepairQuest_Check")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="AfterBezumBoiRolik_Fade" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
		    CinemaFiltersUse()

		    local mancar = GetEntityByName("MansurCar")
			if mancar then
		        mancar:SetGamePositionOnGround( CVector(2512.508, 271.686, 3950.259))
				mancar:SetRotation(Quaternion(-0.039, -0.131, -0.021, 0.990))
			    mancar:SetSkin(1)
				mancar:SetCruisingSpeed(12)
				mancar:SetExternalPathByName("MansurStartGame_2")
				mancar:SetThrottle( 1 )
				mancar:SetCustomLinearVelocity( 20 ) 
			end

			local PCar = GetPlayerVehicle()
			if PCar then
			    PCar:SetGamePositionOnGround( CVector(2568.719, 271.686, 3976.013))
				PCar:SetRotation(Quaternion(0.058, 0.118, 0.024, -0.991))
				PCar:LimitMaxSpeed(12)
				PCar:SetCustomControlEnabled( true ) 
				PCar:SetExternalPathByName("HamzarStartGame_2")
				PCar:SetThrottle( 1 )                      
				PCar:SetCustomLinearVelocity( 10 )    
				PCar:SetCustomControlEnabled( false )
			end

			AddCinematicMessage(46, 0.5)
			AddCinematicMessage(47, 0.5)
			AddCinematicMessage(48, 0.5)
			AddCinematicMessage(49, 0.5)
			AddCinematicMessage(50, 0.5)
			AddCinematicMessage(51, 0.5)
			AddCinematicMessage(52, 0.5)
			AddCinematicMessage(53, 0.5)
			AddCinematicMessage(54, 0.5)

			TActivate("AfterBezumBoiRolik_cam02")
			TActivate("AfterBezumBoiRolik_SpeedUp")
			TActivate("AfterBezumBoiRolik_SpeedDown")
            
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="AfterBezumBoiRolik_SpeedUp" active="0">
		<event	timeout="25"			eventid="GE_TIME_PERIOD" />
		<script>
		    local mancar = GetEntityByName("MansurCar")
			if mancar then
				mancar:SetCruisingSpeed(28)
				mancar:SetCustomLinearVelocity( 20 ) 
			end

			local PCar = GetPlayerVehicle()
			if PCar then
				PCar:LimitMaxSpeed(30)                      
				PCar:SetCustomLinearVelocity( 10 )
			end
            
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="AfterBezumBoiRolik_SpeedDown" active="0">
		<event	timeout="36.5"			eventid="GE_TIME_PERIOD" />
		<script>
		    local mancar = GetEntityByName("MansurCar")
			if mancar then
				mancar:SetCruisingSpeed(18) 
			end

			local PCar = GetPlayerVehicle()
			if PCar then
				PCar:LimitMaxSpeed(20)                      
			end
            
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="AfterBezumBoiRolik_cam02" active="0">
		<event flypath="afterbattleHamza_cam2" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			PlayCustomMusic("QuietDialogue03")

			AddCinematicMessage(55, 0.5)
			AddCinematicMessage(56, 0.5)
			AddCinematicMessage(57, 0.5)

			TActivate("AfterBezumBoiRolik_cam03")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="AfterBezumBoiRolik_cam03" active="0">
		<event flypath="afterbattleHamza_cam3" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			AddCinematicMessage(58, 0.5)
			AddCinematicMessage(59, 0.5)
			AddCinematicMessage(60, 0.5)
			AddCinematicMessage(61, 0.5)
			AddCinematicMessage(62, 0.5)
			AddCinematicMessage(63, 0.5)
			AddCinematicMessage(64, 0.5)
			AddCinematicMessage(65, 0.5)

			TActivate("AfterBezumBoiRolik_cam04")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="AfterBezumBoiRolik_cam04" active="0">
		<event flypath="afterbattleHamza_cam4" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
			local mancar2 = GetEntityByName("MansurCar")
			if mancar2 then
				mancar2:SetCruisingSpeed(40)
				mancar2:SetExternalPathByName("MansurStartGame_3")
				mancar2:SetThrottle( 1 )
				mancar2:SetCustomLinearVelocity( 20 ) 
			end

			AddCinematicMessage(66, 0.5)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="AfterBezumBoiRolik_End" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
		local MCrem = getObj("MansurCar")
			if MCrem then
			    MCrem:Remove()
		    end

		local PCar = GetPlayerVehicle()
			if PCar then
				PCar:UnlimitMaxSpeed()
				PCar:PlaceToEndOfPath("HamzarStartGame_2")
			end

		TakeQuest("BackToHome_quest")
		TakeQuest("Repair_quest")

		AddBook("r4_04062012")

		RestoreAllToleranceStatus()

		TDeactivate("AfterBezumBoiRolik_SpeedUp")
		TDeactivate("AfterBezumBoiRolik_SpeedDown")

		SetCameraBehindPlayerVehicle()

		StopPlayingCustomMusic()

        trigger:Deactivate()
		</script>
	</trigger>

	<!-- The Chronicle of Hamza: Dad's Car -->

	<trigger Name="NewOldCarRolik_Start" active="0">
		<event	timeout="0.01"			eventid="GE_TIME_PERIOD" />
		<script>
        PlayCustomMusic("QuietDialogue01")

		SaveAllToleranceStatus(RS_NEUTRAL)

		local Plf = GetPlayerVehicle()
        local PlfID = GetPlayerVehicleId()

		Fly("NewOldCarRolik_cam01", CINEMATIC_AIM_TO_ID, PlfID, 35, 1, 1 )

		StartCinematic()

		TActivate("NewOldCarRolik_End")

		AddCinematicMessage( 67, 0.25 )
		AddCinematicMessage( 68, 0.25 )
		AddCinematicMessage( 69, 0.25 )
		AddCinematicMessage( 70, 0.25 )
		AddCinematicMessage( 71, 0.25 )
		AddCinematicMessage( 72, 0.25 )
		AddCinematicMessage( 73, 0.25 )
		AddCinematicMessage( 74, 0.25 )

        trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="NewOldCarRolik_End" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
    	RestoreAllToleranceStatus()

		StopPlayingCustomMusic()

		local DadCar = getObj("NewCar")
		if DadCar then
		    DadCar:Remove()
		end

		AddPlayerVehicle("UralDadHamza")

		local PUral = GetPlayerVehicle()
        if PUral then
            PUral:SetGamePositionOnGround( CVector(6555.777, 268.324, 5661.137))
			PUral:SetRotation(Quaternion(-0.001, 0.915, -0.003, -0.404))
			PUral:SetSkin(1)
		end

        trigger:Deactivate()
		</script>
	</trigger>

	<!-- The Chronicle of Hamza: After Race -->

	<trigger Name="AfterRaceRolik_begin" active="0">
		<event	timeout="0.01"			eventid="GE_TIME_PERIOD" />
		<script>
        PlayCustomMusic("QuietDialogue01")

		SaveAllToleranceStatus(RS_NEUTRAL)

		local Plf = GetPlayerVehicle()
        local PlfID = GetPlayerVehicleId()

		Fly("AfterRaceRolik_cam01", CINEMATIC_AIM_TO_ID, PlfID, 21, 1, 0 )
		Fly("AfterRaceRolik_cam02", CINEMATIC_AIM_TO_ID, PlfID, 13, 0, 1 )

		StartCinematic()

		TActivate("AfterRaceRolik_cam02")
		TActivate("AfterRaceRolik_End")

		AddCinematicMessage( 75, 0.25 )
		AddCinematicMessage( 76, 0.25 )
		AddCinematicMessage( 77, 0.25 )
		AddCinematicMessage( 78, 0.25 )
		AddCinematicMessage( 79, 0.25 )

        trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="AfterRaceRolik_cam02" active="0">
		<event flypath="AfterRaceRolik_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
        PlayCustomMusic("Passage05")

		AddCinematicMessage( 80, 0.25 )
		AddCinematicMessage( 81, 0.25 )

        trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="AfterRaceRolik_End" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
    	RestoreAllToleranceStatus()

		SetCameraBehindPlayerVehicle()

		StopPlayingCustomMusic()

		local MCar = getObj("MansurCar")
		if MCar then
		    MCar:Remove()
		end

		TActivate("ConnectMansur_AfterRace")
		TActivate("GadadForDefendrolik_start")
		TakeQuest("DefendGadad_quest")

        trigger:Deactivate()
		</script>
	</trigger>

	<!-- The Chronicle of Hamza: Gadad Defend -->

	<trigger Name="GadadForDefendrolik_start" active="0">
		<event	eventid="GE_OBJECT_ENTERS_LOCATION"	ObjName="GadadDefendQuest_loc" />
		<script>
        PlayCustomMusic("Battle01")

		SaveAllToleranceStatus(RS_NEUTRAL)

		local PVeh = GetPlayerVehicle()
		if PVeh then
			PVeh:SetThrottle( 0 )
			PVeh:SetCustomLinearVelocity( 0 )
		end

		CreateGadadAttackers()
		CreateHarakatDefenders()
		CreateAlfaranDefenders()

		Fly("GadadDefend_cam01", CINEMATIC_NO_AIM, 0, 11, 1, 1 )

		StartCinematic()

		TActivate("ArrivedToGadadForDefend_End")

		AddCinematicMessage( 82, 0.25 )
		AddCinematicMessage( 83, 0.25 )

        trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ArrivedToGadadForDefend_End" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
		RestoreAllToleranceStatus()

        SetTolerance(1100, 1062, RS_ENEMY)
		SetTolerance(1091, 1062, RS_ENEMY)
		SetTolerance(1092, 1062, RS_ENEMY)
		SetTolerance(1090, 1062, RS_ENEMY)
		SetTolerance(1100, 1090, RS_ALLY)
		SetTolerance(1100, 1091, RS_ALLY)
		SetTolerance(1100, 1092, RS_ALLY)
		SetTolerance(1091, 1090, RS_ALLY)
		SetTolerance(1092, 1090, RS_ALLY)
		SetTolerance(1091, 1092, RS_ALLY)
        
        SetCameraBehindPlayerVehicle()

		TActivate("AlfaHaraAllyforBattle")
		TActivate("AfterGadadDefendRolik_Start")

        trigger:Deactivate()
		</script>
	</trigger>

	<!-- The Chronicle of Hamza: After Gadad Defend -->

	<trigger Name="AfterGadadDefendRolik_Start" active="0">
		<event	eventid="GE_OBJECT_DIE"		ObjName="GadadDebyli" />
		<script>
		PlayCustomMusic("Bio02")

		SaveAllToleranceStatus(RS_NEUTRAL)

		local Plf = GetPlayerVehicle()
        local PlfID = GetPlayerVehicleId()

		local PVeh = GetPlayerVehicle()
		if PVeh then
		    PVeh:SetGamePositionOnGround( CVector(5791.517, 251.013, 7154.484))
			PVeh:SetRotation(Quaternion(-0.001, 0.569, -0.004, -0.822))
			PVeh:SetThrottle( 0 )
			PVeh:SetCustomLinearVelocity( 0 )
		end

		local MVeh = getObj("MansurCar_vehicle_0")
		if MVeh then
		    MVeh:Remove()
		end

		local Defs = getObj("GadadDefenders")
		if Defs then
		    Defs:Remove()
		end

		local AlfaDefs = getObj("GadadAlfaDefenders")
		if AlfaDefs then
		    AlfaDefs:Remove()
		end

		local MVehSt = CreateVehicleEx("UralMansur","MansurCar1",CVector(5764.546, 251.021, 7144.929), 1090)
		if MVehSt then
		    MVehSt:SetSkin(1)
			MVehSt:SetRotation(Quaternion(0.004, 0.850, -0.001, 0.526))
		end

		local DzhaVeh = CreateVehicleEx("BelazShot","DzhamilCar",CVector(5764.849, 250.992, 7174.349), 1091)
		if DzhaVeh then
		    DzhaVeh:SetSkin(1)
			DzhaVeh:SetRotation(Quaternion(0.001, 0.884, -0.005, -0.467))
		end

		Fly("AfterGadadDefend_cam01", CINEMATIC_NO_AIM, 0, 34, 1, 0 )
		Fly("AfterGadadDefend_cam02", CINEMATIC_NO_AIM, 0, 40, 0, 0 )
		Fly("AfterGadadDefend_cam03", CINEMATIC_AIM_TO_ID, PlfID, 31, 0, 1 )

		StartCinematic()

		TActivate("AfterGadadDefendRolik_cam02")
		TActivate("AfterGadadDefendRolik_cam03")
		TActivate("AfterGadadDefendRolik_End")

		AddCinematicMessage( 84, 0.25 )
		AddCinematicMessage( 85, 0.25 )
		AddCinematicMessage( 86, 0.25 )
		AddCinematicMessage( 87, 0.25 )
		AddCinematicMessage( 88, 0.25 )
		AddCinematicMessage( 89, 0.25 )
		AddCinematicMessage( 90, 0.25 )

        trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="AfterGadadDefendRolik_cam02" active="0">
		<event flypath="AfterGadadDefend_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
        PlayCustomMusic("Death01")

		AddCinematicMessage( 91, 0.25 )
		AddCinematicMessage( 92, 0.25 )
		AddCinematicMessage( 93, 0.25 )
		AddCinematicMessage( 94, 0.25 )
		AddCinematicMessage( 95, 0.25 )
		AddCinematicMessage( 96, 0.25 )
		AddCinematicMessage( 97, 0.25 )
		AddCinematicMessage( 98, 0.25 )

        trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="AfterGadadDefendRolik_cam03" active="0">
		<event flypath="AfterGadadDefend_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
        PlayCustomMusic("IntenseDialogue01")

		AddCinematicMessage( 99, 0.25 )
		AddCinematicMessage( 100, 0.25 )
		AddCinematicMessage( 101, 0.25 )
		AddCinematicMessage( 102, 0.25 )
		AddCinematicMessage( 103, 0.25 )
		AddCinematicMessage( 104, 0.25 )
		AddCinematicMessage( 105, 0.25 )

        trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="AfterGadadDefendRolik_End" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
		RestoreAllToleranceStatus()

		TActivate("AlfaHaraBackToNorRel")

		local MVeh = getObj("MansurCar1")
		if MVeh then
		    MVeh:Remove()
		end

		local DzhaCar = getObj("DzhamilCar")
		if DzhaCar then
		    DzhaCar:Remove()
		end

        CompleteQuest("DefendGadad_quest")
		TakeQuest("TalkToMansur_quest")

		StopPlayingCustomMusic()
        
        SetCameraBehindPlayerVehicle()

        trigger:Deactivate()
		</script>
	</trigger>

	<!-- The Chronicle of Hamza: Mansur sees the bandit -->

	<trigger Name="MansurSeeRob_start" active="0">
		<event	timeout="0.01"			eventid="GE_TIME_PERIOD" />
		<script>
		SaveAllToleranceStatus(RS_NEUTRAL)

		local PVeh = GetPlayerVehicle()
		if PVeh then
			PVeh:SetThrottle( 0 )
			PVeh:SetCustomLinearVelocity( 8 )
			PVeh:SetGamePositionOnGround( CVector(5760.192, 251.149, 4867.326))
			PVeh:SetRotation(Quaternion(0.000, 0.962, -0.002, -0.273))
		end

		local RobVeh = CreateVehicleEx("UralShot","RobCar",CVector(5621.561, 251.949, 4983.046), 1024)
		if RobVeh then
		    RobVeh:SetRotation(Quaternion(0.011, 0.968, 0.004, 0.250))
			RobVeh:SetExternalPathByName("Rob_Path")
			RobVeh:SetCruisingSpeed(15)
		end

		local RVeh = GetEntityByName("RobCar")
		local RobVehID = RVeh:GetId()

		local Plf = GetPlayerVehicle()
        local PlfID = GetPlayerVehicleId()

		Fly("MansurSeeRob_cam01", CINEMATIC_AIM_TO_ID, RobVehID, 5, 1, 0 )
		Fly("MansurSeeRob_cam02", CINEMATIC_AIM_TO_ID, RobVehID, 6, 0, 0 )
		Fly("MansurSeeRob_cam03", CINEMATIC_AIM_TO_ID, RobVehID, 11, 0, 0 )
		Fly("MansurSeeRob_cam04", CINEMATIC_AIM_TO_ID, PlfID, 26.5, 0, 1 )

		StartCinematic()

        TActivate("MansurSeeRob_Fade")
        TActivate("MansurSeeRob_cam02")
		TActivate("MansurSeeRob_cam03")
		TActivate("MansurSeeRob_cam04")
		TActivate("MansurSeeRob_End")

        trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="MansurSeeRob_Fade" active="0">
		<event eventid="GE_CINEMATIC_ENTER_FADE_IN" ObjName="Player1" />
		<script>
			PlayCustomMusic("Techno03")

			AddCinematicMessage( 106, 0.25 )
            
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="MansurSeeRob_cam02" active="0">
		<event flypath="MansurSeeRob_cam02" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
		AddCinematicMessage( 107, 0.25 )

        trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="MansurSeeRob_cam03" active="0">
		<event flypath="MansurSeeRob_cam03" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
		RuleConsole("cinematic_spring_coeff 1")

		local PVeh = GetPlayerVehicle()
		if PVeh then
		    PVeh:SetExternalPathByName("RobSpy_Path")
		    PVeh:LimitMaxSpeed(15)
		end

		AddCinematicMessage( 108, 0.25 )
		AddCinematicMessage( 109, 0.25 )

        trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="MansurSeeRob_cam04" active="0">
		<event flypath="MansurSeeRob_cam04" eventid="GE_START_CINEMATIC_FLY" ObjName="Player1" />
		<script>
		local PVeh = GetPlayerVehicle()
		if PVeh then
		    PVeh:UnlimitMaxSpeed()
		end

		AddCinematicMessage( 110, 0.25 )
		AddCinematicMessage( 111, 0.25 )
		AddCinematicMessage( 112, 0.25 )
		AddCinematicMessage( 113, 0.25 )
		AddCinematicMessage( 114, 0.25 )

        trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="MansurSeeRob_End" active="0">
		<event eventid="GE_END_CINEMATIC" ObjName="Player1" />
		<event eventid="GE_SKIP_CINEMATIC" ObjName="Player1" />
		<script>
		RestoreAllToleranceStatus()

		local RobVehR = getObj("RobCar")
		if RobVehR then
		    RobVehR:Remove()
		end

		CreateTeam("KillTheRob",1024,CVector(5787.375, 251.980, 4690.306),{"UralShot1"},CVector(5787.375, 251.980, 4690.306), nil)
		
		local RobVehA = getObj("KillTheRob_vehicle_0")
		if RobVehA then
		    RobVehA:SetRotation(Quaternion(0.006, 0.968, -0.001, 0.250))
		end

		CompleteQuest("KillTheRob_quest")

		TakeQuest("KillTheRobfinal_quest")

		TActivate("TheThiefHasBeenKilled")

		StopPlayingCustomMusic()
        
        SetCameraBehindPlayerVehicle()

        trigger:Deactivate()
		</script>
	</trigger>
</triggers>
